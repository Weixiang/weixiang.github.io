[{"content":"前言 由于群晖Docker套件，其Bridge网桥默认的网段为172段，很容易和现有网段冲突，导致发包错误，需要避开才可正常通信。\nDocker配置文件位置 先开启DSM的SSH登录，然后通过SSH连接到DSM。 DSM7.2 前，使用以下命令。\n1 sudo vim /var/packages/Docker/etc/dockerd.json DSM7.2 后 Docker 更名为 Container Manager，并升级了 UI 以便于更新和清理容器。因此路径也需要更改。\n1 sudo vim /var/packages/ContainerManager/etc/dockerd.json 清空内容小技巧：\n（vi进入文件后）在命令模式下，先执行gg(跳转光标至文件首行)； 再执行dG，这样就清空了整个文件。 修改配置文件 DSM7.2 前，使用以下配置。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 { \u0026#34;data-root\u0026#34;: \u0026#34;/var/packages/Docker/var/docker\u0026#34;, \u0026#34;log-driver\u0026#34;: \u0026#34;db\u0026#34;, \u0026#34;storage-driver\u0026#34;: \u0026#34;btrfs\u0026#34;, \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://docker.mirrors.ustc.edu.cn\u0026#34;, \u0026#34;https://hub-mirror.c.163.com\u0026#34;, \u0026#34;https://registry.docker-cn.com\u0026#34; ], \u0026#34;bip\u0026#34;: \u0026#34;192.168.10.1/24\u0026#34;, \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;192.168.10.0/24\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } DSM7.2 后，使用以下配置。\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 { \u0026#34;data-root\u0026#34;: \u0026#34;/var/packages/ContainerManager/var/docker\u0026#34;, \u0026#34;log-driver\u0026#34;: \u0026#34;db\u0026#34;, \u0026#34;storage-driver\u0026#34;: \u0026#34;btrfs\u0026#34;, \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://docker.mirrors.ustc.edu.cn\u0026#34;, \u0026#34;https://hub-mirror.c.163.com\u0026#34;, \u0026#34;https://registry.docker-cn.com\u0026#34; ], \u0026#34;bip\u0026#34;: \u0026#34;192.168.10.1/24\u0026#34;, \u0026#34;default-address-pools\u0026#34;: [ { \u0026#34;base\u0026#34;: \u0026#34;192.168.10.0/24\u0026#34;, \u0026#34;size\u0026#34;: 24 } ] } 提醒：配置不可省略data-root路径，否则配置不生效。\n重启Docker 1 2 3 systemctl daemon-reload systemctl restart pkgctl-Docker # DSM7.2前 systemctl restart pkgctl-ContainerManager # DSM7.2后 附录：常见国内加速镜像源 1 2 3 4 5 \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://docker.mirrors.ustc.edu.cn\u0026#34;, \u0026#34;https://hub-mirror.c.163.com\u0026#34;, \u0026#34;https://registry.docker-cn.com\u0026#34; ] 阿里云镜像加速器获取：https://help.aliyun.com/zh/acr/user-guide/accelerate-the-pulls-of-docker-official-images\n参考文献 https://www.ithome.com/0/680/524.htm https://cr.console.aliyun.com https://help.aliyun.com/zh/acr/user-guide/accelerate-the-pulls-of-docker-official-images https://community.synology.com/enu/forum/17/post/107492 https://support.hyperglance.com/knowledge/changing-the-default-docker-subnet https://www.synoforum.com/threads/docker-restart-on-cli.4678/ https://gist.github.com/styblope/dc55e0ad2a9848f2cc3307d4819d819f\n","date":"2023-10-28T11:57:00+08:00","image":"https://images.unsplash.com/photo-1595587637401-83ff822bd63e?crop=entropy\u0026cs=tinysrgb\u0026fit=max\u0026fm=jpg\u0026ixid=M3wxMTc3M3wwfDF8c2VhcmNofDN8fGRvY2tlcnxlbnwwfHx8fDE2OTg0NjU0Njd8MA\u0026ixlib=rb-4.0.3\u0026q=80\u0026w=2000","permalink":"https://weixiang.github.io/p/changing-dockers-bridge-segment-in-dsm-and-configuring-the-mirror-source/","title":"群晖 DSM Docker 更改 Bridge 网段及配置镜像源"},{"content":"您好，世界！\n","date":"2022-03-06T00:00:00Z","image":"https://weixiang.github.io/p/hello-world/cover_hud7e36f7e20e71be184458283bdae4646_55974_120x120_fill_q75_box_smart1.jpg","permalink":"https://weixiang.github.io/p/hello-world/","title":"Hugooo"}]